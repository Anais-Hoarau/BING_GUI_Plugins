function batch_import_safemove()

%% SUJET CONTROLE
% folder_lists = {'D:\SAFEMOVE_DATA\2_pre_manip_sujets\Eld00_130704_09h40',...
% 'D:\SAFEMOVE_DATA\2_pre_manip_sujets\Pre01_130523_13h09',...
% 'D:\SAFEMOVE_DATA\2_pre_manip_sujets\Ref02_130705_09h33',...
% 'D:\SAFEMOVE_DATA\2_pre_manip_sujets\Ref03_130709_09h06',...
% 'D:\SAFEMOVE_DATA\2_pre_manip_sujets\Ref04_130710_10h11',...
% 'D:\SAFEMOVE_DATA\2_pre_manip_sujets\Ref05_130712_09h34',...
% 'D:\SAFEMOVE_DATA\2_pre_manip_sujets\Ref06_130716_09h50',...
% 'D:\SAFEMOVE_DATA\2_pre_manip_sujets\Ref07_130904_08h53',...
% };

%% D:\SAFEMOVE_DATA\3_sujets Safemove\
% 'D:\SAFEMOVE_DATA\3_sujets Safemove\SafeEld01_130910_10h08',...
% 'D:\SAFEMOVE_DATA\3_sujets Safemove\SafeEld02_131001_09h36',...
% 'D:\SAFEMOVE_DATA\3_sujets Safemove\SafeEld03_130912_09h32',...
% 'D:\SAFEMOVE_DATA\3_sujets Safemove\SafeEld04_130917_08h41',...
% 'D:\SAFEMOVE_DATA\3_sujets Safemove\SafeEld05_130918_09h08',...
% 'D:\SAFEMOVE_DATA\3_sujets Safemove\SafeEld06_130919_09h41',...
% 'D:\SAFEMOVE_DATA\3_sujets Safemove\SafeEld07_130920_09h12',...
% 'D:\SAFEMOVE_DATA\3_sujets Safemove\SafeEld08_130923_09h05',...
% 'D:\SAFEMOVE_DATA\3_sujets Safemove\SafeEld09_130924_09h02',...
% 'D:\SAFEMOVE_DATA\3_sujets Safemove\SafeEld10_130925_09h13',...
% 'D:\SAFEMOVE_DATA\3_sujets Safemove\SafeEld11_130926_09h35',...
% 'D:\SAFEMOVE_DATA\3_sujets Safemove\SafeEld12_130930_09h53',...
% 'D:\SAFEMOVE_DATA\3_sujets Safemove\SafeEld13_131003_09h51',...
% 'D:\SAFEMOVE_DATA\3_sujets Safemove\SafeEld14_131004_10h03',...
% 'D:\SAFEMOVE_DATA\3_sujets Safemove\SafeEld15_131007_09h28',...
% 'D:\SAFEMOVE_DATA\3_sujets Safemove\SafeEld16_131008_09h08',...
% 'D:\SAFEMOVE_DATA\3_sujets Safemove\SafeEld17_131014_10h18',...
% 'D:\SAFEMOVE_DATA\3_sujets Safemove\SafeEld18_131015_09h31',...
% 'D:\SAFEMOVE_DATA\3_sujets Safemove\SafeEld19_131016_10h08',...
% 'D:\SAFEMOVE_DATA\3_sujets Safemove\SafeEld20_131017_09h50,...

%%  G:\SAFEMOVE_DATA\   %%MODIFICATION CHEMIN CAR PASSAGE SSD120
% 'G:\SAFEMOVE_DATA\SafeEld21_131018_10h12',...
% 'G:\SAFEMOVE_DATA\SafeEld22_131021_09h58',...
% 'G:\SAFEMOVE_DATA\SafeEld23_131022_10h10',...
% 'G:\SAFEMOVE_DATA\SafeEld24_131023_10h21',...
% 'G:\SAFEMOVE_DATA\SafeEld25_131024_09h56',...
% 'G:\SAFEMOVE_DATA\SafeEld26_131025_09h58',...
% 'G:\SAFEMOVE_DATA\SafeEld27_131029_09h43',...
% 'G:\SAFEMOVE_DATA\SafeEld28_131030_09h29',...
% 'G:\SAFEMOVE_DATA\SafeEld29_131030_14h47',...
% 'G:\SAFEMOVE_DATA\SafeEld30_131104_11h03',...
% 'G:\SAFEMOVE_DATA\SafeEld31_131112_09h39',...
% 'G:\SAFEMOVE_DATA\SafeEld32_131113_10h24',...
% 'G:\SAFEMOVE_DATA\SafeEld33_131114_10h13',...
% 'G:\SAFEMOVE_DATA\SafeEld34_131115_09h48',...
% 'G:\SAFEMOVE_DATA\SafeEld35_131118_09h40',...
% 'G:\SAFEMOVE_DATA\SafeEld36_131119_09h45',...
% 'G:\SAFEMOVE_DATA\SafeEld37_131120_09h38',...
% 'G:\SAFEMOVE_DATA\SafeEld38_131128_09h50',...
% 'G:\SAFEMOVE_DATA\SafeEld39_131129_09h55',...
% 'G:\SAFEMOVE_DATA\SafeEld40_131203_10h11',...
% 'G:\SAFEMOVE_DATA\SafeEld41_131204_09h46',...
% 'G:\SAFEMOVE_DATA\SafeEld42_131205_09h32',...
% 'G:\SAFEMOVE_DATA\SafeEld43_131206_09h49',...
% 'G:\SAFEMOVE_DATA\SafeEld44_131212_09h08',...

%%  E:\SAFEMOVE_DATA\   %%MODIFICATION CHEMIN CAR PASSAGE SSD120
% 'E:\SAFEMOVE_DATA\SafeEld45_131213_09h30',...


% folder_lists = {'G:\SAFEMOVE_DATA\SafeEld31_131112_09h39',...
%     'G:\SAFEMOVE_DATA\SafeEld32_131113_10h24',...
%     'G:\SAFEMOVE_DATA\SafeEld33_131114_10h13',...
%     'G:\SAFEMOVE_DATA\SafeEld34_131115_09h48',...
%     'G:\SAFEMOVE_DATA\SafeEld35_131118_09h40',...
%     'G:\SAFEMOVE_DATA\SafeEld36_131119_09h45',...
%     'G:\SAFEMOVE_DATA\SafeEld37_131120_09h38',...
%     'G:\SAFEMOVE_DATA\SafeEld38_131128_09h50',...
%     'G:\SAFEMOVE_DATA\SafeEld39_131129_09h55'};


folder_lists = {'E:\SAFEMOVE_DATA\SafeEld45_131213_09h30'};

%     log_csv = fopen('log_import_safemove.csv', 'a+');
%     log_write(log_csv, 'Dossier', 'Mopad2Struct', 'Kvaser2Struct', 'SynchroMopad', 'SynchroKvaser', 'StructMopad2BIND', 'Time Mopad2BIND','StructKvaser2BIND_1', 'Time Kvaser2BIND_1');
%
% On boucle sur les TRIPS
for i = 1:length(folder_lists)
    full_directory = folder_lists{i};
    % on parse le chemin pour déterminer les informations
    % d'identification
    [splits]=regexp(full_directory,'\','split');
    id_data_set=splits{length(splits)};
    sujet_date_heure=regexp(id_data_set,'_','split');
    sujet=sujet_date_heure{1};
    trip_file = [full_directory filesep sujet '.trip'];
    
    % open the trip (create the trip if it doesn't exist)
    trip = fr.lescot.bind.kernel.implementation.SQLiteTrip(trip_file, 0.04, true);
    tic
    
%     % import des données dans une structure
%     [proc_mopad2struct,    ~, ~]    = magic_process('safemove_mopad2struct',trip,full_directory,sujet);
%     [proc_kvaser2struct,  ~, ~]  = magic_process('safemove_kvaser2struct',trip,full_directory,sujet);
%     % fonctions de synchronisation
%     [proc_syncMopad, ~, ~] = magic_process('safemove_sync_mopad_video',trip,full_directory, sujet,'3brakes');
%     [proc_syncKvaser,  ~, ~]  = magic_process('safemove_sync_kvaser_mopad',trip,full_directory,sujet,'3brakes');
    % import des données de la structure dans le trip
    [proc_import_mopad,  time_import_mopad, ~]  = magic_process('safemove_import_mopad2bind',trip,full_directory,sujet);
    [proc_import_kvaser_1,  time_import_kvaser_1, ~]  = magic_process('safemove_import_partiel_kvaser2bind_1',trip,full_directory,sujet);
%     [proc_import_kvaser_radar,  time_import_kvaser_radar, ~]  = magic_process('safemove_import_partiel_kvaser2bind_radar',trip,full_directory,sujet);
    %[proc_import_kvaser,  time_import_kvaser, ~]  = magic_process('safemove_import_kvaser2bind',trip,full_directory,sujet);
    %% insertion des données Conti dans la structure safemove
%     [proc_conti2struct, ~ , ~]  = magic_process('safemove_conti2struct',trip,full_directory,sujet);
    % import des données Conti dans le trip
%     [proc_import_conti2bind, ~ , ~]  = magic_process('safemove_import_conti2bind',trip,full_directory,sujet);
    
    delete(trip);
    %         log_write(log_csv, full_directory, proc_mopad2struct, proc_kvaser2struct, proc_syncMopad, proc_syncKvaser, proc_import_mopad, time_import_mopad, proc_import_kvaser_1, time_import_kvaser_1);
    %         log_write(log_csv, full_directory, proc_mopad2struct, proc_kvaser2struct, proc_syncMopad, proc_syncKvaser, proc_import_mopad, time_import_mopad, proc_import_kvaser, time_import_kvaser);
    toc
end
%     fclose(log_csv);


