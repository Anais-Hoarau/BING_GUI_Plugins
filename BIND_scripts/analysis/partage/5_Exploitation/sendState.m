%{
This function sendState a state to the stateQueue to a XMPP recipient

parameters :
- state : string of the state
- timecode : value of the timecode
- bot : a connecter XMPP matjab bot
- to : string recipientJID username@xmppserver/ressource
- from : string sendJID username@xmppserver/ressource

%}

function sendState( state,timecode,bot,to,from )
    message = Message();
    message.setTo(to);
    message.setFrom(from);
    dataForm = DataForm('submit');
    dataForm.setTitle('variables');
    % always add a "timecode" field to the dataform
    newField = FormField('reference.timecode');
    newField.addValue(num2str(timecode));
    dataForm.addField(newField);
    dataForm.addField('state');    
    newField.addValue(state);
    message.addExtension(dataForm);
    bot.sendMessage(message);
end

