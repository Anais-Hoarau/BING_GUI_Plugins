
% serverName = '137.121.169.64';
serverName = 'w7-paris';
login = 'totostateflow';
password = 'stateflow';
ressource = 'unique';
treatMessagesStoredOnServer = 0;
%expectedVariablesList - A cell array of string with the following format :
%{'varName1', initialValue1, 'nameInWorkspace', 'varName2', initialValue2, 'nameInWorkspace'...} that
%describes the variables that the bot will decode, the default value and the associated
%worskpace name that will be used
expectedVariablesList = {...
    'SensorsData.%Accelerator','0','%acc',...
    'SensorsData.%Brake','0','enfoncement_frein',...
    'SensorsData.%Clutch','0','%clutch',...
    'SensorsData.Clignotant','0','cligno',...
    'SensorsMeasures.steeringWheelAngle','0','angleVolant',...
    'guess_gearbox.gearbox_position','0','rapportBoite',...
    'GPS5Hz.VitesseGPS_5Hz','0','vitesseGps',...
    'CartoData.type_infrastructure','-1','type_infrastructure',...
    'CartoData.distance_ptA','-1','distPtA',...
    'CartoData.distance_ptB','-1','distPtB',...
    'CartoData.distance_ptC','-1','distPtC',...
    'CartoData.marquage','-1','marquage',...
    'CartoData.type_accotement','-1','type_accotement'...
    'CartoData.zone_virage','-1','zone_virage'...
    'CartoData.trafic_oppose','0','trafic_oppose'...
    'ObstaclesData.etat_obstacle','0','etat_obstacle'...
    'DonneesCalculees.DLAngleVolantLisse','0','penteVolant',...
    'ObstaclesData.sensCirculation_obstacle','-1','sensCirculation_obstacle'...
    'ObstaclesData.position_obstacle','-1','position_obstacle'...
    'ObstaclesData.type_obstacle','-1','type_obstacle'...
    'ObstaclesData.vitesse_obstacle','-1','vitesse_obstacle'...
    'ObstaclesData.distance_obstacle','-1','distance_obstacle'...
    'ObstaclesData.temps_a_obstacle','-1','ttc'...
    'SortieVoieData.etat_SV','0','etat_SV'...
    'SortieVoieData.lateralisation_SV','0','lateralisation_SV'...
    'SortieVoieData.tlcCalcule_SV','33','tlc'...
    'SortieVoieData.progression_SV','0','progression_SV'...
    'SortieVoieData.amplitude_SV','0','amplitude_SV'...
    'tlc_Importes.tlcLivic3','999','tlcLivic3',...
    'tlc_Importes.cDetect_1','0','confTlc',...
    };

%variables exepected commentées
% % 'SensorsMeasures.Speed','0','vitesse',...
% 'reference.timecode','0','timecode',...
% 'DonneeVehicule50Hz.Vitesse','0','vitesse',...
% 'DonneeVehicule50Hz.AngleVolant','0','volant',...

botConnexionStateflow = fr.lescot.matjab.bots.Translate2WorkspaceBot(serverName, login, password, ressource, treatMessagesStoredOnServer, expectedVariablesList);
botConnexionStateflow.connect();
% botConnexionStateflow.disconnect();


% connecter un autre bot vers le syteme externe
%Build and connect the XMPP bot
%exportBot = fr.lescot.matjab.Bot(xmppServer, username, password, ressource, 'false');
%exportBot.connect(); 
 
% define queue states
% qs = cell(0,2);
% qs2 = cell(0,2);

% modelName = '.\manoeuvreSV_light.mdl';
% modelName = '.\modelPARTAGE.mdl';
% modelName = '.\model_tlc.mdl';
% modelName = '.\essai1.mdl';
% open_system(modelName);
% sim(modelName);
% h = figure();
% waitfor(h);
% % 
% botConnexionStateflow.disconnect();
% clear all;
% clc;
